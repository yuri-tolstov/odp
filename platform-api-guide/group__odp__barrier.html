<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Reference Manual for linux-generic: ODP BARRIER</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="odpdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ODP-Logo-HQ.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">API Reference Manual for linux-generic
   &#160;<span id="projectnumber">1.24.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__odp__barrier.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ODP BARRIER</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">API Description</h2>
<p>Thread execution and memory ordering barriers. </p>
<p><b> Thread execution barrier (odp_barrier_t) </b></p>
<p>Thread execution barrier synchronizes a group of threads to wait on the barrier until the entire group has reached the barrier.</p>
<p><b> Memory barriers </b></p>
<p>Memory barriers enforce ordering of memory load and store operations specified before and after the barrier. These barriers may affect both compiler optimizations and CPU out-of-order execution. All ODP synchronization mechanisms (e.g. execution barriers, locks, queues, etc ) include all necessary memory barriers, so these calls are not needed when using those. Also ODP atomic operations have memory ordered versions. These explicit barriers may be needed when thread synchronization is based on a non-ODP defined mechanism. Depending on the HW platform, heavy usage of memory barriers may cause significant performance degradation. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gafada4124b8e7661a65ba3ff291cdc488"><td class="memItemLeft" align="right" valign="top"><a id="gafada4124b8e7661a65ba3ff291cdc488"></a>
typedef struct <a class="el" href="structodp__barrier__s.html">odp_barrier_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a></td></tr>
<tr class="memdesc:gafada4124b8e7661a65ba3ff291cdc488"><td class="mdescLeft">&#160;</td><td class="mdescRight">ODP thread synchronization barrier. <br /></td></tr>
<tr class="separator:gafada4124b8e7661a65ba3ff291cdc488"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1416b47755c2af6267074959ac0d4840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a> (<a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *barr, int count)</td></tr>
<tr class="memdesc:ga1416b47755c2af6267074959ac0d4840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize barrier with thread count.  <a href="#ga1416b47755c2af6267074959ac0d4840">More...</a><br /></td></tr>
<tr class="separator:ga1416b47755c2af6267074959ac0d4840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97c8f84490e816330f96155acf0b4b77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a> (<a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *barr)</td></tr>
<tr class="memdesc:ga97c8f84490e816330f96155acf0b4b77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize thread execution on barrier.  <a href="#ga97c8f84490e816330f96155acf0b4b77">More...</a><br /></td></tr>
<tr class="separator:ga97c8f84490e816330f96155acf0b4b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga763dfb959804a7154928c9adfc6bde44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga763dfb959804a7154928c9adfc6bde44">odp_mb_release</a> (void)</td></tr>
<tr class="memdesc:ga763dfb959804a7154928c9adfc6bde44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory barrier for release operations.  <a href="#ga763dfb959804a7154928c9adfc6bde44">More...</a><br /></td></tr>
<tr class="separator:ga763dfb959804a7154928c9adfc6bde44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60d74a4c760e2de4e86ba2162bfe5de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga60d74a4c760e2de4e86ba2162bfe5de0">odp_mb_acquire</a> (void)</td></tr>
<tr class="memdesc:ga60d74a4c760e2de4e86ba2162bfe5de0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory barrier for acquire operations.  <a href="#ga60d74a4c760e2de4e86ba2162bfe5de0">More...</a><br /></td></tr>
<tr class="separator:ga60d74a4c760e2de4e86ba2162bfe5de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a641c164c73f0ac06a2d6386e12dcc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0">odp_mb_full</a> (void)</td></tr>
<tr class="memdesc:ga3a641c164c73f0ac06a2d6386e12dcc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Full memory barrier.  <a href="#ga3a641c164c73f0ac06a2d6386e12dcc0">More...</a><br /></td></tr>
<tr class="separator:ga3a641c164c73f0ac06a2d6386e12dcc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1416b47755c2af6267074959ac0d4840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1416b47755c2af6267074959ac0d4840">&#9670;&nbsp;</a></span>odp_barrier_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_barrier_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *&#160;</td>
          <td class="paramname"><em>barr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize barrier with thread count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barr</td><td>Pointer to a barrier variable </td></tr>
    <tr><td class="paramname">count</td><td>Thread count </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipsec_2odp_ipsec_8c-example.html#a118">ipsec/odp_ipsec.c</a>, <a class="el" href="ipsec_api_2odp_ipsec_8c-example.html#a144">ipsec_api/odp_ipsec.c</a>, <a class="el" href="ipsec_offload_2odp_ipsec_offload_8c-example.html#a101">ipsec_offload/odp_ipsec_offload.c</a>, <a class="el" href="odp_generator_8c-example.html#a137">odp_generator.c</a>, <a class="el" href="odp_ipfragreass_8c-example.html#a36">odp_ipfragreass.c</a>, <a class="el" href="odp_l2fwd_8c-example.html#a159">odp_l2fwd.c</a>, <a class="el" href="odp_l3fwd_8c-example.html#a85">odp_l3fwd.c</a>, <a class="el" href="odp_simple_pipeline_8c-example.html#a105">odp_simple_pipeline.c</a>, <a class="el" href="odp_switch_8c-example.html#a97">odp_switch.c</a>, <a class="el" href="odp_timer_test_8c-example.html#a104">odp_timer_test.c</a>, and <a class="el" href="time_global_test_8c-example.html#a51">time_global_test.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga97c8f84490e816330f96155acf0b4b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97c8f84490e816330f96155acf0b4b77">&#9670;&nbsp;</a></span>odp_barrier_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_barrier_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *&#160;</td>
          <td class="paramname"><em>barr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize thread execution on barrier. </p>
<p>Wait for all threads to arrive at the barrier until they are let loose again. Threads will block (spin) until the last thread has arrived at the barrier. All memory operations before the <a class="el" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77" title="Synchronize thread execution on barrier. ">odp_barrier_wait()</a> call will be visible to all threads when they leave the barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barr</td><td>Pointer to a barrier variable </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipsec_2odp_ipsec_8c-example.html#a96">ipsec/odp_ipsec.c</a>, <a class="el" href="ipsec_api_2odp_ipsec_8c-example.html#a106">ipsec_api/odp_ipsec.c</a>, <a class="el" href="ipsec_offload_2odp_ipsec_offload_8c-example.html#a57">ipsec_offload/odp_ipsec_offload.c</a>, <a class="el" href="odp_generator_8c-example.html#a80">odp_generator.c</a>, <a class="el" href="odp_ipfragreass_8c-example.html#a42">odp_ipfragreass.c</a>, <a class="el" href="odp_l2fwd_8c-example.html#a31">odp_l2fwd.c</a>, <a class="el" href="odp_l3fwd_8c-example.html#a35">odp_l3fwd.c</a>, <a class="el" href="odp_simple_pipeline_8c-example.html#a42">odp_simple_pipeline.c</a>, <a class="el" href="odp_switch_8c-example.html#a50">odp_switch.c</a>, <a class="el" href="odp_timer_test_8c-example.html#a42">odp_timer_test.c</a>, and <a class="el" href="time_global_test_8c-example.html#a31">time_global_test.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga763dfb959804a7154928c9adfc6bde44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga763dfb959804a7154928c9adfc6bde44">&#9670;&nbsp;</a></span>odp_mb_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_release </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory barrier for release operations. </p>
<p>This memory barrier has release semantics. It synchronizes with a pairing barrier for acquire operations. The releasing and acquiring threads synchronize through shared memory. The releasing thread must call this barrier before signaling the acquiring thread. After the acquiring thread receives the signal, it must call <a class="el" href="group__odp__barrier.html#ga60d74a4c760e2de4e86ba2162bfe5de0" title="Memory barrier for acquire operations. ">odp_mb_acquire()</a> before it reads the memory written by the releasing thread.</p>
<p>This call is not needed when using ODP defined synchronization mechanisms.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__odp__barrier.html#ga60d74a4c760e2de4e86ba2162bfe5de0" title="Memory barrier for acquire operations. ">odp_mb_acquire()</a> </dd></dl>

</div>
</div>
<a id="ga60d74a4c760e2de4e86ba2162bfe5de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60d74a4c760e2de4e86ba2162bfe5de0">&#9670;&nbsp;</a></span>odp_mb_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_acquire </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory barrier for acquire operations. </p>
<p>This memory barrier has acquire semantics. It synchronizes with a pairing barrier for release operations. The releasing and acquiring threads synchronize through shared memory. The releasing thread must call <a class="el" href="group__odp__barrier.html#ga763dfb959804a7154928c9adfc6bde44" title="Memory barrier for release operations. ">odp_mb_release()</a> before signaling the acquiring thread. After the acquiring thread receives the signal, it must call this barrier before it reads the memory written by the releasing thread.</p>
<p>This call is not needed when using ODP defined synchronization mechanisms.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__odp__barrier.html#ga763dfb959804a7154928c9adfc6bde44" title="Memory barrier for release operations. ">odp_mb_release()</a> </dd></dl>

</div>
</div>
<a id="ga3a641c164c73f0ac06a2d6386e12dcc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a641c164c73f0ac06a2d6386e12dcc0">&#9670;&nbsp;</a></span>odp_mb_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_full </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Full memory barrier. </p>
<p>This is a full memory barrier. It guarantees that all load and store operations specified before it are visible to other threads before all load and store operations specified after it.</p>
<p>This call is not needed when using ODP defined synchronization mechanisms. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="ipsec_2odp_ipsec_8c-example.html#a124">ipsec/odp_ipsec.c</a>, <a class="el" href="ipsec_api_2odp_ipsec_8c-example.html#a160">ipsec_api/odp_ipsec.c</a>, <a class="el" href="odp_generator_8c-example.html#a143">odp_generator.c</a>, <a class="el" href="odp_l2fwd_8c-example.html#a37">odp_l2fwd.c</a>, <a class="el" href="odp_l2fwd_simple_8c-example.html#a72">odp_l2fwd_simple.c</a>, <a class="el" href="odp_l3fwd_8c-example.html#a40">odp_l3fwd.c</a>, and <a class="el" href="odp_switch_8c-example.html#a66">odp_switch.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
